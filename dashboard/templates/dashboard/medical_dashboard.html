{% extends 'dashboard/base.html' %}
{% load static %}
{% block content %}

    <style>
        /* Use system font stack for a modern feel */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
            Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
            background: #f9f9f9;
        }

        .nav-tabs .nav-link {
            border: none;
            border-radius: 0;
            color: #666;
        }
        .nav-tabs .nav-link.active {
            border: none;
            border-bottom: 3px solid #007bff;
            font-weight: 500;
            color: #007bff;
        }

        .custom-card {
            border: none;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }
        .custom-card-header {
            border-bottom: none;
            font-weight: 600;
            font-size: 1.1rem;
            border-top-left-radius: 12px;
            border-top-right-radius: 12px;
        }
        .custom-card-footer {
            border-top: none;
            border-bottom-left-radius: 12px;
            border-bottom-right-radius: 12px;
        }
        .custom-card .list-group-item {
            border: none;
            padding-left: 0;
            padding-right: 0;
        }
        .list-group-item-action:hover {
            background-color: #f0f0f0;
        }
        .mr-2 {
            margin-right: 0.5rem !important;
            font-size: 1.25rem;
        }
        .custom-card-header.bg-light {
            background-color: #eeeeee !important;
        }
    </style>

    <div class="container-fluid mt-3">
        <div class="row">
            <!-- Left Column: Main Dashboard Content -->
            <div class="col-lg-9">
                <!-- Navigation Tabs (Optional) -->
                <ul class="nav nav-tabs mb-3">
                    <li class="nav-item">
                        <a class="nav-link active" href="#">Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'medical_patients' %}">Patients</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Appointments</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Test Results</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Reports</a>
                    </li>
                </ul>

                <div class="row">
                    <!-- Upcoming Appointments Card -->
                    <div class="col-md-6 mb-4">
                        <div class="card custom-card h-100">
                            <div class="card-header custom-card-header bg-primary text-white">
                                <i class="fas fa-calendar-check mr-2"></i>Upcoming Appointments
                            </div>
                            <div class="card-body">
                                {% if upcoming_appointments %}
                                    <ul class="list-group list-group-flush">
                                        {% for appointment in upcoming_appointments %}
                                            <li class="list-group-item">
                                                <strong>{{ appointment.appointment_date|date:"M d, Y H:i" }}</strong><br>
                                                Patient: {{ appointment.patient.user.first_name }} {{ appointment.patient.user.last_name }}<br>
                                                Reason: {{ appointment.reason }}
                                            </li>
                                        {% endfor %}
                                    </ul>
                                {% else %}
                                    <p>No upcoming appointments.</p>
                                {% endif %}
                            </div>
                            <div class="card-footer custom-card-footer text-right">
                                <a href="#" class="btn btn-sm btn-outline-primary">View All</a>
                            </div>
                        </div>
                    </div>

                    <!-- Patient List Card -->
                    <div class="col-md-6 mb-4">
                        <div class="card custom-card h-100">
                            <div class="card-header custom-card-header bg-info text-white">
                                <i class="fas fa-users mr-2"></i>Patient List
                            </div>
                            <div class="card-body">
                                {% if patients %}
                                    <ul class="list-group list-group-flush">
                                        {% for patient in patients %}
                                            <li class="list-group-item">
                                                {{ patient.user.first_name }} {{ patient.user.last_name }}
                                            </li>
                                        {% endfor %}
                                    </ul>
                                {% else %}
                                    <p>No patients assigned.</p>
                                {% endif %}
                            </div>
                            <div class="card-footer custom-card-footer text-right">
                                <a href="#" class="btn btn-sm btn-outline-info">View All</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column: Sidebar with Quick Links and Notes -->
            <div class="col-lg-3">
                <!-- Quick Links Card -->
                <div class="card custom-card mb-3">
                    <div class="card-header custom-card-header bg-light">
                        <strong>Quick Links</strong>
                    </div>
                    <div class="list-group list-group-flush">
                        <a href="{% url 'medical_new_appointment' %}" class="list-group-item list-group-item-action">
                            <i class="fas fa-plus-circle text-success mr-2"></i>New Appointment
                        </a>
                        <a href="{% url 'medical_new_report' %}" class="list-group-item list-group-item-action">
                            <i class="fas fa-file-medical text-primary mr-2"></i>Create Report
                        </a>
                        <a href="{% url 'medical_view_reports' %}" class="list-group-item list-group-item-action">
                            <i class="fas fa-file-medical-alt text-info mr-2"></i>View Reports
                        </a>
                        <a href="{% url 'medical_new_prescription' %}" class="list-group-item list-group-item-action">
                            <i class="fas fa-pills text-success mr-2"></i>Add Prescription
                        </a>
                        <a href="{% url 'medical_new_patient' %}" class="list-group-item list-group-item-action">
                            <i class="fas fa-user-plus text-primary mr-2"></i>New Patient
                        </a>
                    </div>
                </div>

                <!-- Notes Card -->
                <div class="card custom-card mb-3">
                    <div class="card-header custom-card-header bg-light">
                        <strong>Notes</strong>
                    </div>
                    <div class="card-body">
                        <p>
                            <strong>Reminder:</strong> Check patient updates regularly.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
